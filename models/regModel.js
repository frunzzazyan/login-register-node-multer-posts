const mongoose = require("mongoose")
const bcrypt = require("bcryptjs")

const RegModel = new mongoose.Schema({
    name : {
        type : String,
        required : true
    },
    email : {
        type : String,
        required : true,
        unique : true,
    },
    age : {
        type : Number,
        required : true
    },
    password : {
        type : String,
        required : true
    },
    avatar : {
        type : String,
        default : "data:image/jpeg;base64,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"
    }
})

RegModel.pre("save", async function(){
    const hashPass = await bcrypt.hash(this.password, 10)
    this.password = hashPass
})


module.exports = mongoose.model("users", RegModel)